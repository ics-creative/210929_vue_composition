import{d as e,u as t,c as s,r as n,a as r,b as a,w as o,e as l,f as i,o as u,g as c,h as d,i as v,F as p,p as m,j as g,n as h,t as f,k as z,l as b,m as w,q as _,s as y,v as S,x as I,y as V,z as B,A as T,B as F,C,D as k,E as A}from"./vendor.53fe884d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var x=e({setup(){const e=t();return{isTopPage:s((()=>"Top"===e.name))}}});const L={class:"app"},M=c("◀︎ サンプル一覧に戻る");x.render=function(e,t,s,c,d,v){const p=n("router-link"),m=n("routerView");return u(),r("div",L,[e.isTopPage?l("",!0):(u(),a(p,{key:0,to:"/"},{default:o((()=>[M])),_:1})),i(m)])};const P=d({state:{length:300,angle:60},mutations:{setLength(e,t){e.length=t},setAngle(e,t){e.angle=t}},actions:{changeLength({commit:e,state:t},s){e("setLength",s)},changeAngle({commit:e,state:t},s){e("setAngle",s)},reset({commit:e}){e("setLength",0),e("setAngle",0)}}});var $=e({setup(){}});const D=v("h1",null,"Composition APIを活用したコンポーネント分割テクニック サンプル集",-1),O=c("1コンポーネントにすべての機能を詰め込んだ例"),R=c("ロジックをコンポジション関数に分割する：FizzBuzz"),j=c("ロジックをコンポジション関数に分割する：郵便番号検索"),N=c("定型処理をコンポジション関数に分割する：setInterval"),E=c("定型処理をコンポジション関数に分割する：Intersection Observer"),H=c("Vuexストアの入出力を分割する");$.render=function(e,t,s,a,l,c){const d=n("router-link");return u(),r(p,null,[D,v("ol",null,[v("li",null,[i(d,{to:"fat"},{default:o((()=>[O])),_:1})]),v("li",null,[i(d,{to:"fizzbuzz"},{default:o((()=>[R])),_:1})]),v("li",null,[i(d,{to:"postal"},{default:o((()=>[j])),_:1})]),v("li",null,[i(d,{to:"time"},{default:o((()=>[N])),_:1})]),v("li",null,[i(d,{to:"scroll"},{default:o((()=>[E])),_:1})]),v("li",null,[i(d,{to:"store"},{default:o((()=>[H])),_:1})])])],64)};const U={data:()=>({current:new Date,timer:0}),computed:{timeText(){const e=this.current,[t,s,n]=[e.getHours(),e.getMinutes(),e.getSeconds()];return[t,s,n].map((e=>String(e).padStart(2,"0"))).join(":")},angles(){const e=this.current,[t,s,n]=[e.getHours(),e.getMinutes(),e.getSeconds()];return{hour:(t%12+s/60)/12*360-90,minute:(s+n/60)/60*360-90,second:n/60*360-90}}},methods:{updateTime(){this.current=new Date}},mounted(){this.timer=window.setInterval((()=>this.updateTime()),100)},unmounted(){window.clearInterval(this.timer)}};m("data-v-6fb19a1a");const W=v("h1",null,"1コンポーネントにすべての機能を詰め込んだ例",-1),q=v("div",{class:"description"},[c(" シンプルな時計のコンポーネントです。機能が少ないため、コードの行数自体はさほど多くありませんが、 コンポーネントの責務が曖昧なので、機能追加によって肥大化してしまうリスクがあります。 "),v("a",{href:"https://github.com/ics-creative/211007_vue_composition/blob/master/src/samples/01_fatComponent/FatClock.vue",class:"source"},"ソースコードを見る")],-1),K={class:"FatClock"},G={class:"clock"},J={class:"timeText"};g(),U.render=function(e,t,s,n,a,o){return u(),r(p,null,[W,q,v("div",K,[v("div",G,[v("div",{class:"hand hour",style:h({transform:`rotate(${o.angles.hour}deg)`})},null,4),v("div",{class:"hand minute",style:h({transform:`rotate(${o.angles.minute}deg)`})},null,4),v("div",{class:"hand second",style:h({transform:`rotate(${o.angles.second}deg)`})},null,4),v("div",J,f(o.timeText),1)])])],64)},U.__scopeId="data-v-6fb19a1a";var Q=e({setup(){const e=z(1),t=s((()=>e.value%15==0?"FizzBuzz":e.value%5==0?"Buzz":e.value%3==0?"Fizz":String(e.value)));return{count:e,result:t,up:()=>{e.value++},reset:()=>{e.value=1}}}});const X={class:"fizzBuzzView"},Y=v("br",null,null,-1),Z=v("br",null,null,-1);Q.render=function(e,t,s,n,a,o){return u(),r("div",X,[c(" 数値："+f(e.count),1),Y,c(" 解答："+f(e.result),1),Z,v("button",{onClick:t[0]||(t[0]=(...t)=>e.up&&e.up(...t))},"カウントアップ"),v("button",{onClick:t[1]||(t[1]=(...t)=>e.reset&&e.reset(...t))},"リセット")])};var ee=e({setup(){const{count:e,result:t}=(()=>{const e=z(1),t=s((()=>e.value%15==0?"FizzBuzz":e.value%5==0?"Buzz":e.value%3==0?"Fizz":String(e.value)));return{count:e,result:t}})();return{count:e,result:t,up:()=>{e.value++},reset:()=>{e.value=1}}}});const te={class:"fizzBuzzView"},se=v("br",null,null,-1),ne=v("br",null,null,-1);ee.render=function(e,t,s,n,a,o){return u(),r("div",te,[c(" 数値："+f(e.count),1),se,c(" 解答："+f(e.result),1),ne,v("button",{onClick:t[0]||(t[0]=(...t)=>e.up&&e.up(...t))},"カウントアップ"),v("button",{onClick:t[1]||(t[1]=(...t)=>e.reset&&e.reset(...t))},"リセット")])};var re=e({components:{FizzBuzzViewBefore:Q,FizzBuzzViewAfter:ee},setup(){}});m("data-v-6f552892");const ae={class:"FizzBuzzPage"},oe=v("h1",null,"ロジックをコンポジション関数に分割する：FizzBuzzの例",-1),le=v("div",{class:"description"},[c(" FizzBuzzを表示するシンプルなコンポーネントです。以下の2つは機能としては同一です。 "),v("a",{href:"https://github.com/ics-creative/211007_vue_composition/tree/master/src/samples/02_fizzBuzz",class:"source"},"ソースコードを見る")],-1),ie=v("h2",null,"分割前（FizzBuzzViewBefore.vue）",-1),ue={class:"demo"},ce=v("h2",null,"分割後（FizzBuzzViewAfter.vue）",-1),de={class:"demo"};g(),re.render=function(e,t,s,a,o,l){const c=n("FizzBuzzViewBefore"),d=n("FizzBuzzViewAfter");return u(),r("div",ae,[oe,le,ie,v("div",ue,[i(c)]),ce,v("div",de,[i(d)])])},re.__scopeId="data-v-6f552892";const ve=()=>{const e=z(""),t=z([]),n=z(0),r=s((()=>n.value>0));return _(e,(async()=>{n.value++,t.value.length=0,t.value.push(...await(async e=>{if(!e.match(/^[0-9]{7}$/))return[];const t=`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${e}`,s=await new Promise(((e,s)=>{b(t,{},((t,n)=>{t&&s(t),e(n)}))}));return console.log(s),200===s.status&&s.results?s.results.map((e=>`${e.address1} ${e.address2} ${e.address3}`)):[]})(e.value)),n.value--})),{postalCode:e,addresses:w(t),isWaiting:r}};var pe=e({setup(){const{postalCode:e,addresses:t,isWaiting:n}=ve(),r=s((()=>{const s=t.value.length;return n.value?"...取得中":e.value?s?s+"件見つかりました":"見つかりませんでした":"郵便番号（7桁）を入力してください"}));return{postalCode:e,addresses:t,isWaiting:n,resultMessage:r}}});m("data-v-c7e204e6");const me=v("h1",null,"ロジックをコンポジション関数に分割する：郵便番号検索",-1),ge=v("div",{class:"description"},[c(" 郵便番号検索を行う実用的なコンポーネントの例です。 API通信や非同期の状態管理をコンポジション関数に分割したことで、 コンポーネント側では画面表示や入力に関するロジックのみを実装しています。 "),v("a",{href:"https://github.com/ics-creative/211007_vue_composition/tree/master/src/samples/03_postalSearch",class:"source"},"ソースコードを見る")],-1),he={class:"PostalSearch"},fe={class:"postal"},ze=c("郵便番号： "),be={class:"msg"},we={class:"addressList"};g(),pe.render=function(e,t,s,n,a,o){return u(),r(p,null,[me,ge,v("div",he,[v("div",fe,[ze,y(v("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.postalCode=t)},null,512),[[S,e.postalCode]])]),v("div",be,f(e.resultMessage),1),v("ol",we,[(u(!0),r(p,null,I(e.addresses,(e=>(u(),r("li",{key:e},f(e),1)))),128))])])],64)},pe.__scopeId="data-v-c7e204e6";var _e=e({setup(){const e=z(new Date),t=s((()=>{const t=e.value;return[t.getHours()%12,t.getMinutes(),t.getSeconds()].map((e=>e.toString().padStart(2,"0"))).join(":")}));let n=setInterval((()=>{e.value=new Date}),100);return V((()=>{clearInterval(n)})),{timeText:t}}});const ye={class:"TimeView"};_e.render=function(e,t,s,n,a,o){return u(),r("div",ye,f(e.timeText),1)};var Se=e({setup(){const e=z(new Date),t=s((()=>{const t=e.value;return[t.getHours()%12,t.getMinutes(),t.getSeconds()].map((e=>e.toString().padStart(2,"0"))).join(":")}));return((e,t)=>{const s=window.setInterval(e,t),n=()=>{window.clearInterval(s)};V(n)})((()=>{e.value=new Date}),100),{timeText:t}}});const Ie={class:"TimeView"};Se.render=function(e,t,s,n,a,o){return u(),r("div",Ie,f(e.timeText),1)};var Ve=e({components:{TimeViewBefore:_e,TimeViewAfter:Se},setup(){}});m("data-v-0b90351c");const Be={class:"TimePage"},Te=v("h1",null,"定型処理をコンポジション関数に分割する：setIntervalの例",-1),Fe=v("div",{class:"description"},[c(" setIntervalを使って時間を表示するシンプルなコンポーネントです。以下の2つは機能としては同一です。 "),v("a",{href:"https://github.com/ics-creative/211007_vue_composition/tree/master/src/samples/04_time",class:"source"},"ソースコードを見る")],-1),Ce=v("h2",null,"分割前（TimeViewBefore.vue）",-1),ke={class:"demo"},Ae=v("h2",null,"分割後（TimeViewAfter.vue）",-1),xe={class:"demo"};g(),Ve.render=function(e,t,s,a,o,l){const c=n("TimeViewBefore"),d=n("TimeViewAfter");return u(),r("div",Be,[Te,Fe,Ce,v("div",ke,[i(c)]),Ae,v("div",xe,[i(d)])])},Ve.__scopeId="data-v-0b90351c";var Le=e({setup(){const e=z(),t=z(),n=z(),{intersected:r}=((e,t,s,n)=>{let r;const a=z();return B((()=>{e.value&&(r=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target;e.isIntersecting?a.value=t:a.value===t&&(a.value=void 0);const r=e.isIntersecting?s:n;r&&r(t)}))}),{root:e.value}),t.forEach((e=>{e.value&&r.observe(e.value)})))})),V((()=>{r.disconnect()})),{intersected:a}})(e,[t,n]);return{currentColor:s((()=>{var e,t;return null!=(t=null==(e=r.value)?void 0:e.style.backgroundColor)?t:""})),outerRef:e,targetRef1:t,targetRef2:n}}});m("data-v-7581af66");const Me=v("h1",null,"定型処理をコンポジション関数に分割する：Intersection Observerの例",-1),Pe=v("div",{class:"description"},[c(" Intersection Observerを使って、スクロール時の要素の交差を検出し、表示を変える例です。 Intersection Observerは多機能で利用するための手順が少々複雑ですが、 コンポジション関数に追い出して必要な機能のみを提供することで、 コンポーネントから簡単に利用できるようにしています。 "),v("a",{href:"https://github.com/ics-creative/211007_vue_composition/tree/master/src/samples/05_scroll",class:"source"},"ソースコードを見る")],-1),$e={class:"ScrollView"},De=c(" SCROLL ME ▼ "),Oe=v("div",{class:"inner"},"1",-1),Re=v("div",{class:"inner"},"2",-1),je=v("div",{class:"inner"},"3",-1),Ne=v("div",{class:"inner"},"4",-1),Ee={class:"inner",ref:"targetRef1",style:{"background-color":"gold"}},He=v("div",{class:"inner"},"6",-1),Ue=v("div",{class:"inner"},"7",-1),We=v("div",{class:"inner"},"8",-1),qe=v("div",{class:"inner"},"9",-1),Ke={class:"inner",ref:"targetRef2",style:{"background-color":"powderblue"}},Ge=v("div",{class:"inner"},"11",-1),Je=v("div",{class:"inner"},"12",-1);g(),Le.render=function(e,t,s,n,a,o){return u(),r(p,null,[Me,Pe,v("div",$e,[v("div",{class:"outer",ref:"outerRef",style:h({backgroundColor:e.currentColor})},[De,Oe,Re,je,Ne,v("div",Ee,"5",512),He,Ue,We,qe,v("div",Ke,"10",512),Ge,Je],4)])],64)},Le.__scopeId="data-v-7581af66";var Qe=e({props:{unit:{type:String,default:"px"}},setup:e=>({length:(e=>{const t=T();return s({get(){const s=t.state.length;return"inch"===e.value?Math.round(s/72*10)/10:"mm"===e.value?Math.round(s/72*25.4):Number.isFinite(s)?Math.round(s):0},set(s){let n=s;"inch"===e.value&&(n=72*s),"mm"===e.value&&(n=s/25.4*72),t.dispatch("changeLength",n)}})})(F(e,"unit"))})});const Xe={class:"StoreLengthView"};Qe.render=function(e,t,s,n,a,o){return u(),r("div",Xe,[y(v("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.length=t)},null,512),[[S,e.length,void 0,{number:!0}]]),c(f(e.unit),1)])};const Ye=Math.PI/180;var Ze=e({props:{unit:{type:String,default:"deg"}},setup:e=>({angle:(e=>{const t=T();return s({get(){const s=t.state.angle;return"rad"===e.value?Number((s*Ye).toFixed(2)):Number.isFinite(s)?Math.round(s):0},set(s){let n=s;"rad"===e.value&&(n=s/Ye),t.dispatch("changeAngle",n)}})})(F(e,"unit"))})});const et={class:"StoreAngleView"};Ze.render=function(e,t,s,n,a,o){return u(),r("div",et,[y(v("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.angle=t)},null,512),[[S,e.angle,void 0,{number:!0}]]),c(f(e.unit),1)])};var tt=e({components:{StoreLength:Qe,StoreAngle:Ze},setup(){}});m("data-v-349f8d21");const st={class:"TimePage"},nt=v("h1",null,"Vuexストアの入出力を分割する例",-1),rt=v("div",{class:"description"},[c(" Vuexストアに格納された長さ(length)と角度(angle)の2つの値を、それぞれ複数の単位で表示・更新する例です。 ストアの値を表示側の単位にあわせて変換する処理をコンポジション関数が担うことで、 コンポーネントとストア両方の肥大化を防いでいます。 "),v("a",{href:"https://github.com/ics-creative/211007_vue_composition/tree/master/src/samples/06_store",class:"source"},"ソースコードを見る")],-1),at={class:"demo"},ot=v("h2",null,"何かの長さ",-1),lt=v("h2",null,"何かの角度",-1);g(),tt.render=function(e,t,s,a,o,l){const c=n("StoreLength"),d=n("StoreAngle");return u(),r("div",st,[nt,rt,v("div",at,[ot,i(c,{unit:"px"}),i(c,{unit:"inch"}),i(c,{unit:"mm"}),lt,i(d,{unit:"deg"}),i(d,{unit:"rad"})])])},tt.__scopeId="data-v-349f8d21";const it=[{name:"Top",path:"/",component:$},{name:"Fat",path:"/fat",component:U},{name:"FizzBuzz",path:"/fizzbuzz",component:re},{name:"Postal",path:"/postal",component:pe},{name:"Time",path:"/time",component:Ve},{name:"Scroll",path:"/scroll",component:Le},{name:"Store",path:"/store",component:tt}],ut=C({history:k(),routes:it});A(x).use(P).use(ut).mount("#app");
