import{d as e,u as t,c as n,r as s,a as r,b as a,e as o,o as l,f as i,g as u,p as c,h as d,i as v,n as p,t as m,F as g,j as h,k as f,l as z,m as w,w as x,q as b,v as y,s as I,x as S,y as V,z as B,A as T,B as F,C as A,D as C}from"./vendor.3b8a09b4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var k=e({setup(){const e=t();return{isTopPage:n((()=>"Top"===e.name))}}});const L={class:"app"},M={key:0,href:"/"};k.render=function(e,t,n,i,u,c){const d=s("routerView");return l(),r("div",L,[e.isTopPage?a("",!0):(l(),r("a",M,"◀︎ サンプル一覧に戻る")),o(d)])};const P=i({state:{length:300,angle:60},mutations:{setLength(e,t){e.length=t},setAngle(e,t){e.angle=t}},actions:{changeLength({commit:e,state:t},n){e("setLength",n)},changeAngle({commit:e,state:t},n){e("setAngle",n)},reset({commit:e}){e("setLength",0),e("setAngle",0)}}});var _=e({setup(){}});const $=u('<h1>Composition APIを活用したコンポーネント分割テクニック サンプル集</h1><ol><li><a href="/#/fat">1コンポーネントにすべての機能を詰め込んだ例</a></li><li><a href="/#/fizzbuzz">ロジックをコンポジション関数に分割する：FizzBuzz</a></li><li><a href="/#/postal">ロジックをコンポジション関数に分割する：郵便番号検索</a></li><li><a href="/#/time">定型処理をコンポジション関数に分割する：setInterval</a></li><li><a href="/#/scroll">定型処理をコンポジション関数に分割する：Intersection Observer</a></li><li><a href="/#/store">Vuexストアの入出力を分割する</a></li></ol>',2);_.render=function(e,t,n,s,r,a){return $};const D={data:()=>({current:new Date,timer:0}),computed:{timeText(){const e=this.current,[t,n,s]=[e.getHours(),e.getMinutes(),e.getSeconds()];return[t,n,s].map((e=>String(e).padStart(2,"0"))).join(":")},angles(){const e=this.current,[t,n,s]=[e.getHours(),e.getMinutes(),e.getSeconds()];return{hour:(t%12+n/60)/12*360-90,minute:(n+s/60)/60*360-90,second:s/60*360-90}}},methods:{updateTime(){this.current=new Date}},mounted(){this.timer=window.setInterval((()=>this.updateTime()),100)},unmounted(){window.clearInterval(this.timer)}};c("data-v-1e1ca337");const O=v("h1",null,"1コンポーネントにすべての機能を詰め込んだ例",-1),R=v("div",{class:"description"},[h(" シンプルな時計のコンポーネントです。機能が少ないため、コードの行数自体はさほど多くありませんが、 コンポーネントの責務が曖昧なので、機能追加によって肥大化してしまうリスクがあります。 "),v("a",{href:"xxx",class:"source"},"ソースコードを見る")],-1),j={class:"FatClock"},N={class:"clock"},E={class:"timeText"};d(),D.render=function(e,t,n,s,a,o){return l(),r(g,null,[O,R,v("div",j,[v("div",N,[v("div",{class:"hand hour",style:p({transform:`rotate(${o.angles.hour}deg)`})},null,4),v("div",{class:"hand minute",style:p({transform:`rotate(${o.angles.minute}deg)`})},null,4),v("div",{class:"hand second",style:p({transform:`rotate(${o.angles.second}deg)`})},null,4),v("div",E,m(o.timeText),1)])])],64)},D.__scopeId="data-v-1e1ca337";var H=e({setup(){const e=f(1),t=n((()=>e.value%15==0?"FizzBuzz":e.value%5==0?"Buzz":e.value%3==0?"Fizz":String(e.value)));return{count:e,result:t,up:()=>{e.value++},reset:()=>{e.value=1}}}});const U={class:"fizzBuzzView"},W=v("br",null,null,-1),q=v("br",null,null,-1);H.render=function(e,t,n,s,a,o){return l(),r("div",U,[h(" 数値："+m(e.count),1),W,h(" 解答："+m(e.result),1),q,v("button",{onClick:t[0]||(t[0]=(...t)=>e.up&&e.up(...t))},"カウントアップ"),v("button",{onClick:t[1]||(t[1]=(...t)=>e.reset&&e.reset(...t))},"リセット")])};var K=e({setup(){const{count:e,result:t}=(()=>{const e=f(1),t=n((()=>e.value%15==0?"FizzBuzz":e.value%5==0?"Buzz":e.value%3==0?"Fizz":String(e.value)));return{count:e,result:t}})();return{count:e,result:t,up:()=>{e.value++},reset:()=>{e.value=1}}}});const G={class:"fizzBuzzView"},J=v("br",null,null,-1),Q=v("br",null,null,-1);K.render=function(e,t,n,s,a,o){return l(),r("div",G,[h(" 数値："+m(e.count),1),J,h(" 解答："+m(e.result),1),Q,v("button",{onClick:t[0]||(t[0]=(...t)=>e.up&&e.up(...t))},"カウントアップ"),v("button",{onClick:t[1]||(t[1]=(...t)=>e.reset&&e.reset(...t))},"リセット")])};var X=e({components:{FizzBuzzViewBefore:H,FizzBuzzViewAfter:K},setup(){}});c("data-v-3f2f932e");const Y={class:"FizzBuzzPage"},Z=v("h1",null,"ロジックをコンポジション関数に分割する：FizzBuzzの例",-1),ee=v("div",{class:"description"},[h(" FizzBuzzを表示するシンプルなコンポーネントです。以下の2つは機能としては同一です。 "),v("a",{href:"xxx",class:"source"},"ソースコードを見る")],-1),te=v("h2",null,"分割前（FizzBuzzViewBefore.vue）",-1),ne={class:"demo"},se=v("h2",null,"分割後（FizzBuzzViewAfter.vue）",-1),re={class:"demo"};d(),X.render=function(e,t,n,a,i,u){const c=s("FizzBuzzViewBefore"),d=s("FizzBuzzViewAfter");return l(),r("div",Y,[Z,ee,te,v("div",ne,[o(c)]),se,v("div",re,[o(d)])])},X.__scopeId="data-v-3f2f932e";const ae=()=>{const e=f(""),t=f([]),s=f(0),r=n((()=>s.value>0));return x(e,(async()=>{s.value++,t.value.length=0,t.value.push(...await(async e=>{if(!e.match(/^[0-9]{7}$/))return[];const t=`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${e}`,n=await new Promise(((e,n)=>{z(t,{},((t,s)=>{t&&n(t),e(s)}))}));return console.log(n),200===n.status&&n.results?n.results.map((e=>`${e.address1} ${e.address2} ${e.address3}`)):[]})(e.value)),s.value--})),{postalCode:e,addresses:w(t),isWaiting:r}};var oe=e({setup(){const{postalCode:e,addresses:t,isWaiting:s}=ae(),r=n((()=>{const n=t.value.length;return s.value?"...取得中":e.value?n?n+"件見つかりました":"見つかりませんでした":"郵便番号（7桁）を入力してください"}));return{postalCode:e,addresses:t,isWaiting:s,resultMessage:r}}});c("data-v-f3938466");const le=v("h1",null,"ロジックをコンポジション関数に分割する：郵便番号検索",-1),ie=v("div",{class:"description"},[h(" 郵便番号検索を行う実用的なコンポーネントの例です。 API通信や非同期の状態管理をコンポジション関数に分割したことで、 コンポーネント側では画面表示や入力に関するロジックのみを実装しています。 "),v("a",{href:"xxx",class:"source"},"ソースコードを見る")],-1),ue={class:"PostalSearch"},ce={class:"postal"},de=h("郵便番号： "),ve={class:"msg"},pe={class:"addressList"};d(),oe.render=function(e,t,n,s,a,o){return l(),r(g,null,[le,ie,v("div",ue,[v("div",ce,[de,b(v("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.postalCode=t)},null,512),[[y,e.postalCode]])]),v("div",ve,m(e.resultMessage),1),v("ol",pe,[(l(!0),r(g,null,I(e.addresses,(e=>(l(),r("li",{key:e},m(e),1)))),128))])])],64)},oe.__scopeId="data-v-f3938466";var me=e({setup(){const e=f(new Date),t=n((()=>{const t=e.value;return[t.getHours()%12,t.getMinutes(),t.getSeconds()].map((e=>e.toString().padStart(2,"0"))).join(":")}));let s=setInterval((()=>{e.value=new Date}),100);return S((()=>{clearInterval(s)})),{timeText:t}}});const ge={class:"TimeView"};me.render=function(e,t,n,s,a,o){return l(),r("div",ge,m(e.timeText),1)};var he=e({setup(){const e=f(new Date),t=n((()=>{const t=e.value;return[t.getHours()%12,t.getMinutes(),t.getSeconds()].map((e=>e.toString().padStart(2,"0"))).join(":")}));return((e,t)=>{const n=window.setInterval(e,t),s=()=>{window.clearInterval(n)};S(s)})((()=>{e.value=new Date}),100),{timeText:t}}});const fe={class:"TimeView"};he.render=function(e,t,n,s,a,o){return l(),r("div",fe,m(e.timeText),1)};var ze=e({components:{TimeViewBefore:me,TimeViewAfter:he},setup(){}});c("data-v-697f869a");const we={class:"TimePage"},xe=v("h1",null,"定型処理をコンポジション関数に分割する：setIntervalの例",-1),be=v("div",{class:"description"},[h(" setIntervalを使って時間を表示するシンプルなコンポーネントです。以下の2つは機能としては同一です。 "),v("a",{href:"xxx",class:"source"},"ソースコードを見る")],-1),ye=v("h2",null,"分割前（TimeViewBefore.vue）",-1),Ie={class:"demo"},Se=v("h2",null,"分割後（TimeViewAfter.vue）",-1),Ve={class:"demo"};d(),ze.render=function(e,t,n,a,i,u){const c=s("TimeViewBefore"),d=s("TimeViewAfter");return l(),r("div",we,[xe,be,ye,v("div",Ie,[o(c)]),Se,v("div",Ve,[o(d)])])},ze.__scopeId="data-v-697f869a";var Be=e({setup(){const e=f(),t=f(),s=f(),{intersected:r}=((e,t,n,s)=>{let r;const a=f();return V((()=>{e.value&&(r=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target;e.isIntersecting?a.value=t:a.value===t&&(a.value=void 0);const r=e.isIntersecting?n:s;r&&r(t)}))}),{root:e.value}),t.forEach((e=>{e.value&&r.observe(e.value)})))})),S((()=>{r.disconnect()})),{intersected:a}})(e,[t,s]);return{currentColor:n((()=>{var e,t;return null!=(t=null==(e=r.value)?void 0:e.style.backgroundColor)?t:""})),outerRef:e,targetRef1:t,targetRef2:s}}});c("data-v-7d201ca8");const Te=v("h1",null,"定型処理をコンポジション関数に分割する：Intersection Observerの例",-1),Fe=v("div",{class:"description"},[h(" Intersection Observerを使って、スクロール時の要素の交差を検出し、表示を変える例です。 Intersection Observerは多機能で利用するための手順が少々複雑ですが、 コンポジション関数に追い出して必要な機能のみを提供することで、 コンポーネントから簡単に利用できるようにしています。 "),v("a",{href:"xxx",class:"source"},"ソースコードを見る")],-1),Ae={class:"ScrollView"},Ce=h(" SCROLL ME ▼ "),ke=v("div",{class:"inner"},"1",-1),Le=v("div",{class:"inner"},"2",-1),Me=v("div",{class:"inner"},"3",-1),Pe=v("div",{class:"inner"},"4",-1),_e={class:"inner",ref:"targetRef1",style:{"background-color":"gold"}},$e=v("div",{class:"inner"},"6",-1),De=v("div",{class:"inner"},"7",-1),Oe=v("div",{class:"inner"},"8",-1),Re=v("div",{class:"inner"},"9",-1),je={class:"inner",ref:"targetRef2",style:{"background-color":"powderblue"}},Ne=v("div",{class:"inner"},"11",-1),Ee=v("div",{class:"inner"},"12",-1);d(),Be.render=function(e,t,n,s,a,o){return l(),r(g,null,[Te,Fe,v("div",Ae,[v("div",{class:"outer",ref:"outerRef",style:p({backgroundColor:e.currentColor})},[Ce,ke,Le,Me,Pe,v("div",_e,"5",512),$e,De,Oe,Re,v("div",je,"10",512),Ne,Ee],4)])],64)},Be.__scopeId="data-v-7d201ca8";var He=e({props:{unit:{type:String,default:"px"}},setup:e=>({length:(e=>{const t=B();return n({get(){const n=t.state.length;return"inch"===e.value?Math.round(n/72*10)/10:"mm"===e.value?Math.round(n/72*24.5):Number.isFinite(n)?Math.round(n):0},set(n){let s=n;"inch"===e.value&&(s=72*n),"mm"===e.value&&(s=n/24.5*72),t.dispatch("changeLength",s)}})})(T(e,"unit"))})});const Ue={class:"StoreLengthView"};He.render=function(e,t,n,s,a,o){return l(),r("div",Ue,[b(v("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.length=t)},null,512),[[y,e.length,void 0,{number:!0}]]),h(m(e.unit),1)])};const We=Math.PI/180;var qe=e({props:{unit:{type:String,default:"deg"}},setup:e=>({angle:(e=>{const t=B();return n({get(){const n=t.state.angle;return"rad"===e.value?Number((n*We).toFixed(2)):Number.isFinite(n)?Math.round(n):0},set(n){let s=n;"rad"===e.value&&(s=n/We),t.dispatch("changeAngle",s)}})})(T(e,"unit"))})});const Ke={class:"StoreAngleView"};qe.render=function(e,t,n,s,a,o){return l(),r("div",Ke,[b(v("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.angle=t)},null,512),[[y,e.angle,void 0,{number:!0}]]),h(m(e.unit),1)])};var Ge=e({components:{StoreLength:He,StoreAngle:qe},setup(){}});c("data-v-29378eee");const Je={class:"TimePage"},Qe=v("h1",null,"Vuexストアの入出力を分割する例",-1),Xe=v("div",{class:"description"},[h(" Vuexストアに格納された長さ(length)と角度(angle)の2つの値を、それぞれ複数の単位で表示・更新する例です。 ストアの値を表示側の単位にあわせて変換する処理をコンポジション関数が担うことで、 コンポーネントとストア両方の肥大化を防いでいます。 "),v("a",{href:"xxx",class:"source"},"ソースコードを見る")],-1),Ye={class:"demo"},Ze=v("h2",null,"何かの長さ",-1),et=v("h2",null,"何かの角度",-1);d(),Ge.render=function(e,t,n,a,i,u){const c=s("StoreLength"),d=s("StoreAngle");return l(),r("div",Je,[Qe,Xe,v("div",Ye,[Ze,o(c,{unit:"px"}),o(c,{unit:"inch"}),o(c,{unit:"mm"}),et,o(d,{unit:"deg"}),o(d,{unit:"rad"})])])},Ge.__scopeId="data-v-29378eee";const tt=[{name:"Top",path:"/",component:_},{name:"Fat",path:"/fat",component:D},{name:"FizzBuzz",path:"/fizzbuzz",component:X},{name:"Postal",path:"/postal",component:oe},{name:"Time",path:"/time",component:ze},{name:"Scroll",path:"/scroll",component:Be},{name:"Store",path:"/store",component:Ge}],nt=F({history:A(),routes:tt});C(k).use(P).use(nt).mount("#app");
